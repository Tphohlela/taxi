<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>

<body>

    <div class="display-3 text-center m-2">Taxi App</div>

    <div class="background text-center" x-data="{count1: 0 ,count2: 0 ,count3: 0, 
        tfare1: [],tfare2: [],tfare3: [],
        trips:0, trips2:0, trips3:0,
        avail1:3,avail2:5,avail3:5,
        fare1:21,fare2:14,fare3:18,
        total:0, total2:0,total3:0,
        sum:0,sum2:0,sum3:0, accumulator:0,current:0,error:''}">
        <div class="col-auto">
        <td class="err" x-text="error"></td>

        <table class="table table-responsive">
            <thead>
                <tr>
                    <th scope="col">Departure</th>
                    <th scope="col">Destination</th>
                    <th scope="col">Passenger actions</th>
                    <th scope="col">Taxi trips</th>
                    <th scope="col">Taxi fare</th>
                    <th scope="col">Total fare</th>
                    <th scope="col">Taxis avail</th>
                </tr>
            </thead>

            <tr>
                <td>Cape Town</td>
                <td>Belville</td>

                <template x-if="count1<0">
                    <td><button  @click="">+</button><span x-text="count1"></span><button @click="">-</button></td>
                </template>
                <template x-if="count1 == 0">
                    <td><button @click="count1++">+</button><span x-text="count1"></span><button @click="">-</button>
                    </td>
                </template>
                <template x-if="count1 > 0">
                    <td><button @click="count1++">+</button><span x-text="count1"></span><button
                            @click="count1--">-</button>
                    </td>
                </template>
                <td>
                    <template x-if="count1 < 5 || avail1 <= 0">
                        <button
                            @click="$refs.error.innerText = 'Sorry, no more taxis available',setTimeout(() => $refs.error.innerText = ' ', 3000)">leave</button>
                    </template>
                    <!-- <template x-if="avail1 <= 0">
                    <button @click="">leave</button>
                </template> -->

                    <template x-if="count1 >= 5 && avail1 > 0">
                        <!-- <button @click="total = fare1 * count1, count1 -= 5,trips += 1,avail1 -= 1, tfare1.push(total),console.log(JSON.stringify(tfare1), sum = tfare1.reduce((accumulator, current) => accumulator + current)),console.log(JSON.stringify(sum))" >leave</button> -->
                        <button
                            @click="total = fare1 * count1, count1 -= 5,trips += 1,avail1 -= 1, sum +=105">leave</button>
                    </template>
                    <span x-text="trips"></span>
                </td>

                <td>R21.00</td>
                <td>R<span x-text="sum.toFixed(2)"></span></td>
                <td x-text="avail1"></td>
            </tr>

            <tr>
                <td>Cape Town</td>
                <td>Wynberg</td>
                <td><button @click="count2++">+</button><span x-text="count2"></span><button
                        @click="count2--">-</button></td>
                <td>
                    <template x-if="count2 < 5">
                        <button @click="">leave</button>
                    </template>
                    <template x-if="avail2 <= 0">
                        <button @click="">leave</button>
                    </template>
                    <template x-if="count2 >= 5 && avail2 > 0">
                        <!-- <button @click="total = fare1 * count1, count1 -= 5,trips += 1,avail1 -= 1, tfare1.push(total),console.log(JSON.stringify(tfare1), sum = tfare1.reduce((accumulator, current) => accumulator + current)),console.log(JSON.stringify(sum))" >leave</button> -->
                        <button
                            @click="total2 = fare2 * count2, count2 -= 5,trips2 += 1,avail2 -= 1, sum2 +=70">leave</button>
                    </template>
                    <span x-text="trips2"></span>
                </td>
                <td>R14.00</td>
                <td>R<span x-text="sum2.toFixed(2)"></span></td>
                <td x-text="avail2"></td>
            </tr>

            <tr>
                <td>Cape Town</td>
                <td>Parow</td>
                <td><button @click="count3++">+</button><span x-text="count3"></span><button
                        @click="count1--">-</button></td>
                <td>
                    <template x-if="count3 < 5">
                        <button @click="">leave</button>
                    </template>
                    <template x-if="avail3 <= 0">
                        <button @click="">leave</button>
                    </template>
                    <template x-if="count3 >= 5 && avail3 > 0">
                        <!-- <button @click="total = fare1 * count1, count1 -= 5,trips += 1,avail1 -= 1, tfare1.push(total),console.log(JSON.stringify(tfare1), sum = tfare1.reduce((accumulator, current) => accumulator + current)),console.log(JSON.stringify(sum))" >leave</button> -->
                        <button
                            @click="total3 = fare3 * count3, count3 -= 5,trips3 += 1,avail3 -= 1, sum3 +=105">leave</button>
                    </template>
                    <span x-text="trips3"></span>
                </td>
                <td>R18.00</td>
                <td>R<span x-text="sum3.toFixed(2)"></span></td>
                <td x-text="avail3"></td>
            </tr>

            <tbody>

            </tbody>
        </table>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.0/dist/alpine.min.js" defer></script>
</body>

</html>